## Description
This is a super simple application that mimics a data warehouse application. Clients can query data aggregated 
and filtered via two dedicated endpoints.

## Design 
The application is build based on SpringBoot framework and Flapdoodle database (in-memory MongoDB). During the 
startup phase the application loads csv records into the memory. At the runtime phase, embedded Tomcat exposes API that 
returns DTO with requested data.

## Usage
Two endpoints are prepared:

### 1. Aggregated data
`/statsAggregated` for aggregated data based on provided filters. Data can be filtered based on
- from : in convention yyyy-MM-dd
- to : in convention yyyy-MM-dd
- campaigns (array)
- datasource (array)

Example queries:
- [/statsAggregated?from=2019-09-07&to=2021-09-07&campaigns=SN_Brand](http://ec2-54-217-56-173.eu-west-1.compute.amazonaws.com:8080/statsAggregated?from=2019-09-07&to=2021-09-07&campaigns=SN_Brand)
- [/statsAggregated?from=2019-09-07&to=2021-09-07&campaigns=SN_Brand&campaigns=Freundschaftswerbung&datasource=Twitter Ads](http://ec2-54-217-56-173.eu-west-1.compute.amazonaws.com:8080/statsAggregated?from=2019-09-07&to=2021-09-07&campaigns=SN_Brand&campaigns=Freundschaftswerbung&datasource=Twitter%20Ads)
- [/statsAggregated?datasource=Facebook Ads](http://ec2-54-217-56-173.eu-west-1.compute.amazonaws.com:8080/statsAggregated?datasource=Facebook%20Ads)

Notes:
- at least one filer has to be provided
- 400 error is thrown when no records were found

Response example:
```
{
  "clicks": 331,
  "impressions": 1979,
  "ctr": 0.1672562,
  "datasource": [
    "Facebook Ads"
  ]
}
```

### 2. Daily data
`/statsDaily` for daily aggregated data based on provided filters. Statistic can be filtered based on
- from : in convention yyyy-MM-dd
- to : in convention yyyy-MM-dd
- campaigns (array)
- datasource (array)

Example queries:
- [/statsDaily?from=2020-01-07&to=2021-09-07](http://ec2-54-217-56-173.eu-west-1.compute.amazonaws.com:8080/statsDaily?from=2020-01-07&to=2021-09-07)
- [/statsDaily?from=2019-09-07&to=2021-09-07&campaigns=SN_Brand,Freundschaftswerbung&datasource=Twitter Ads](http://ec2-54-217-56-173.eu-west-1.compute.amazonaws.com:8080/statsDaily?from=2019-09-07&to=2021-09-07&campaigns=SN_Brand,Freundschaftswerbung&datasource=Twitter%20Ads)
- [/statsDaily?datasource=Facebook Ads&from=2019-10-01&to=2020-10-29](http://ec2-54-217-56-173.eu-west-1.compute.amazonaws.com:8080/statsDaily?from=2020-01-07&to=2021-09-07&datasource=Facebook%20Ads)

Notes:
- `from` and `to` params are must-have

Response example:
```
[{
    "clicks": 822,
    "impressions": 44206,
    "ctr": 0.01859476,
    "date": "2020-01-30"
  },
  {
    "clicks": 851,
    "impressions": 33979,
    "ctr": 0.02504488,
    "date": "2020-01-29"
  }]
```
## Check it out!
1. The app is deployed on a super weak t1.micro ec2 instance in eu-west-1. 
- http://ec2-54-217-56-173.eu-west-1.compute.amazonaws.com:8080/statsDaily?from=2020-01-07&to=2021-09-07
- http://ec2-54-217-56-173.eu-west-1.compute.amazonaws.com:8080/statsAggregated?datasource=Facebook%20Ads
2. Check the swagger page with autogenerated console 
- http://ec2-54-217-56-173.eu-west-1.compute.amazonaws.com:8080/swagger.html
3. Run locally the application 
- in the root of application type `./mvnw spring-boot:run`. Then navigate to localhost:8080/swagger.html

## FAQ
- it's a really simple application without sophisticated error handling, caching, metrics itd.